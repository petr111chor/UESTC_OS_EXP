# UESTC_OS_exp1
电子科技大学操作系统（小班）实验1：系统化思维模式下计算机操作系统进程与资源管理设计
# 写在前面
**系统还有少量bug，但是所有测试样例均能跑通，仅供参考**

以下为**实验指导书**内容
## 1. 实验目的
设计和实现进程与资源管理，并完成Test shell的编写，以建立系统的进程管理、调度、资源管理和分配的知识体系，从而加深对操作系统进程调度和资源管理功能的宏观理解和微观实现技术的掌握。
## 2. 实验内容
在实验室提供的软硬件环境中，设计并实现一个基本的进程与资源管理器。该管理器能够完成进程的控制，如进程创建与撤销、进程的状态转换；能够基于优先级调度算法完成进程的调度，模拟时钟中断，在同优先级进程中采用时间片轮转调度算法进行调度；能够完成资源的分配与释放，并完成进程之间的同步。该管理器同时也能完成从用户终端或者指定文件读取用户命令，通过Test shell模块完成对用户命令的解释，将用户命令转化为对进程与资源控制的具体操作，并将执行结果输出到终端或指定文件中。
## 3. 实验环境
Windows，C语言
## 4. 实验要求
要求学生熟悉掌握计算机操作系统进程管理和资源管理的基本原理和关键技术，包含进程控制、进程调度、进程同步及资源管理，在此基础上设计和实现进程和资源管理器。具体步骤包括：了解功能需求、完成系统总统设计、相关的数据结构定义和具体函数设计。
同时要求设计与实现驱动程序（test shell）：驱动该管理器工作，即将命令语言（即用户要求）转换成对与内核函数（如create, request等）的调用。
## 5. 实验过程
### 5.1 总体设计
系统总体架构如图1所示，最右边部分为进程与资源管理器，属于操作系统内核的功能。该管理器具有如下功能：完成进程创建、撤销和进程调度；完成多单元 (multi_unit)资源的管理；完成资源的申请和释放；完成错误检测和定时器中断功能。

![image](https://github.com/petr111chor/UESTC_OS_exp1/blob/main/image1.jpg)

图1中间绿色部分为驱动程序test shell, 设计与实现test shell，该test shell将调度所设计的进程与资源管理器来完成测试。Test shell的应具有的功能：
- 从终端或者测试文件读取命令；
- 将用户需求转换成调度内核函数（即调度进程和资源管理器）；
- 在终端或输出文件中显示结果：如当前运行的进程、错误信息等。
图1最左端部分为：通过终端（如键盘输入）或者测试文件来给出相应的用户命令，以及模拟硬件引起的中断
### 5.2  Test shell设计
Test shell要求完成的命令（Mandatory Commands）：
- init
- cr (name) (priority)(=1 or 2) // 创建进程
- de (name) // 删除进程
- req (resource name) (# of units) // 请求资源
- rel (resource name) (# of units)  // 释放资源
- to  // 模拟超时
- lsp // 列出所有进程与其状态
- lsr // 列出所有资源与其状态
- cp (name) // 根据进程名查询进程信息
## 6. 测试样例
输入测试命令或将测试命令放在测试文件input.txt中，内容为：

> cr x 1          
> cr p 1  
> cr q 1	  
> cr r 1  
> to  
> req R2 1  
> to  
> req R3 3  
> to	  
> req R4 3  
> to  
> to  
> req R3 1  
> req R4 2  
> req R2 2  
> to  
> de q  
> to  
> to  

输出结果应为：init x x x x p p q q r r x p q r x x x p x
